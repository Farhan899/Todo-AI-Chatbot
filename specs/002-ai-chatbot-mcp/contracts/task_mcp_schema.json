{
  "mcp_server": "task",
  "version": "1.0.0",
  "description": "Task MCP Server - Authoritative task state management",
  "tools": {
    "add_task": {
      "description": "Create a new task for the authenticated user",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID (from JWT token, validated)"
          },
          "title": {
            "type": "string",
            "description": "Task title (required, 1-200 characters)",
            "minLength": 1,
            "maxLength": 200
          },
          "description": {
            "type": "string",
            "description": "Optional task description (max 2000 characters)",
            "maxLength": 2000
          }
        },
        "required": ["user_id", "title"]
      },
      "response": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique task ID (UUID)"
          },
          "user_id": {
            "type": "string",
            "description": "User ID (owner)"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": ["string", "null"]
          },
          "is_completed": {
            "type": "boolean",
            "default": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "errors": {
        "400": "Invalid input (empty title, user_id mismatch)",
        "401": "Unauthorized (missing/invalid token)",
        "403": "Forbidden (cannot access another user's tasks)"
      }
    },
    "list_tasks": {
      "description": "List all tasks for the authenticated user",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID (from JWT token, validated)"
          },
          "include_completed": {
            "type": "boolean",
            "description": "Include completed tasks (default: true)",
            "default": true
          },
          "sort_by": {
            "type": "string",
            "enum": ["created_at", "updated_at", "title"],
            "description": "Field to sort by (default: created_at desc)",
            "default": "created_at"
          }
        },
        "required": ["user_id"]
      },
      "response": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Task ID"
            },
            "title": {
              "type": "string"
            },
            "description": {
              "type": ["string", "null"]
            },
            "is_completed": {
              "type": "boolean"
            },
            "created_at": {
              "type": "string",
              "format": "date-time"
            },
            "updated_at": {
              "type": "string",
              "format": "date-time"
            }
          }
        }
      },
      "errors": {
        "401": "Unauthorized",
        "403": "Forbidden"
      }
    },
    "get_task": {
      "description": "Retrieve a single task by ID",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID (from JWT token, validated)"
          },
          "task_id": {
            "type": "string",
            "description": "Task ID to retrieve"
          }
        },
        "required": ["user_id", "task_id"]
      },
      "response": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": ["string", "null"]
          },
          "is_completed": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "errors": {
        "404": "Task not found",
        "401": "Unauthorized",
        "403": "Forbidden (cannot access another user's task)"
      }
    },
    "update_task": {
      "description": "Update task title and/or description",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID (from JWT token, validated)"
          },
          "task_id": {
            "type": "string",
            "description": "Task ID to update"
          },
          "title": {
            "type": "string",
            "description": "New title (optional, 1-200 characters)",
            "minLength": 1,
            "maxLength": 200
          },
          "description": {
            "type": ["string", "null"],
            "description": "New description (optional, max 2000 characters)",
            "maxLength": 2000
          }
        },
        "required": ["user_id", "task_id"]
      },
      "response": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": ["string", "null"]
          },
          "is_completed": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "errors": {
        "400": "Invalid input",
        "404": "Task not found",
        "401": "Unauthorized",
        "403": "Forbidden"
      }
    },
    "delete_task": {
      "description": "Delete a task permanently",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID (from JWT token, validated)"
          },
          "task_id": {
            "type": "string",
            "description": "Task ID to delete"
          }
        },
        "required": ["user_id", "task_id"]
      },
      "response": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "task_id": {
            "type": "string"
          }
        }
      },
      "errors": {
        "404": "Task not found",
        "401": "Unauthorized",
        "403": "Forbidden"
      }
    },
    "complete_task": {
      "description": "Mark a task as completed or uncompleted",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User ID (from JWT token, validated)"
          },
          "task_id": {
            "type": "string",
            "description": "Task ID to complete/uncomplete"
          },
          "completed": {
            "type": "boolean",
            "description": "Set completion status (true=completed, false=uncompleted)",
            "default": true
          }
        },
        "required": ["user_id", "task_id"]
      },
      "response": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": ["string", "null"]
          },
          "is_completed": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "errors": {
        "404": "Task not found",
        "401": "Unauthorized",
        "403": "Forbidden"
      }
    }
  }
}
